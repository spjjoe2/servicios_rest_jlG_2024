package init.service;

import java.util.Arrays;
import java.util.List;

import org.springframework.stereotype.Service;
import org.springframework.web.client.HttpClientErrorException;
import org.springframework.web.client.RestClient;

import init.model.Book;
import init.utilidades.Mapeador;
import model.Pais;

@Service
public class LibreriaServiceImpl {
	String url="https://localhost:9000/libros"; 
	Mapeador mapeador;
	RestClient restClient;	
	
	public LibreriaServiceImpl(Mapeador mapeador, RestClient restClient) {
		super();
		this.mapeador = mapeador;
		this.restClient = restClient;
	}

	List<Book> buscarPorRgPrecios(int prcioMin, int precioMax){
		String url="http://restcountries.com/v2/all"; 

		
		@Override
		public List<Book>  buscarPorRgPrecios(int precioMin, int precioMax){
			try {
				return Arrays.stream(restClient
						.get()
						.uri(url+"/catalogo")
						.retrieve()
						.body(LibroJsonass)) //Stream<Pais>
						.filter(p->p.getContinente().equals(continente))
						.toList();
			}
			catch(HttpClientErrorException ex) {
				ex.printStackTrace();
				throw new RuntimeException();
			}
		}
		
		
		
		
		
	}

}
